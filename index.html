
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Gambling mit den Boys</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f4f4; }
        h1 { font-size: 28px; }
        nav a { margin-right: 15px; }
        table { width: 60%; margin: 20px 0; border-collapse: collapse; font-size: 14px; }
        th, td { padding: 8px 12px; border: 1px solid #ccc; text-align: center; }
        #chartContainer { width: 60%; height: 250px; margin-top: 10px; }
        .dropdown-section { margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Gambling mit den Boys</h1>
    <p>Wer ist der Beste?</p>

    <nav>
        <a href="watten.html">Watten</a>
        <a href="mensch.html">Mensch 채rgere Dich nicht</a>
        <a href="arschloch.html">Arschloch</a>
        <a href="kniffel.html">Kniffel</a>
        <a href="admin.html">Admin</a>
    </nav>

    <div class="dropdown-section">
        <label for="spielerDropdown">Verf체gbare Spieler: </label>
        <select id="spielerDropdown"></select>
        <input type="text" id="neuerSpielerInput" placeholder="Spieler hinzuf체gen">
        <button onclick="spielerHinzufuegen()">Hinzuf체gen</button>
    </div>

    <div id="gesamtSiege"><h2 style="text-align:center;">Gesamtsiege aller Spiele</h2><h2>Gesamtsiege</h2>
        <!-- Tabelle entfernt -->
            <thead><tr><th>Spieler</th><th>Siege</th></tr></thead>
            <tbody></tbody>
        
    </div>

    <div id="chartContainer" style="margin-top: 0;">
        <canvas id="siegeChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDy68MUU2CV9-tCsu9qbKBd7NEL-MGNxX0",
            authDomain: "gambling-app-24-7.firebaseapp.com",
            projectId: "gambling-app-24-7",
            storageBucket: "gambling-app-24-7.appspot.com",
            messagingSenderId: "929710119993",
            appId: "1:929710119993:web:b4678cc49c503c332701e8"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function ladeSiegeUndSpieler() {
            const siegeSnap = await getDocs(collection(db, "siege"));
            const siegeData = {};
            const spielerSet = new Set();

            siegeSnap.forEach((doc) => {
                const { spieler, spielart } = doc.data();
                siegeData[spieler] = (siegeData[spieler] || 0) + 1;
                spielerSet.add(spieler);
            });

            const tabelle = document.querySelector("#siegeTabelle tbody");
            const dropdown = document.getElementById("spielerDropdown");
            tabelle.innerHTML = "";
            dropdown.innerHTML = "";

            const labels = [], werte = [];
            Object.entries(siegeData).forEach(([spieler, siege]) => {
                const row = `<tr><td>${spieler}</td><td>${siege}</td></tr>`;
                tabelle.innerHTML += row;
                labels.push(spieler);
                werte.push(siege);
            });

            spielerSet.forEach(name => {
                dropdown.innerHTML += `<option value="${name}">${name}</option>`;
            });

            new Chart(document.getElementById("siegeChart"), {
                type: "bar",
                data: {
                    labels: labels,
                    datasets: [{
                        label: "Anzahl Siege",
                        data: werte,
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        async function spielerHinzufuegen() {
            const input = document.getElementById("neuerSpielerInput");
            const name = input.value.trim();
            if (!name) return;
            const dropdown = document.getElementById("spielerDropdown");
            dropdown.innerHTML += `<option value="${name}">${name}</option>`;
            input.value = "";
        }

        ladeSiegeUndSpieler();
    </script>
</body>
</html>
